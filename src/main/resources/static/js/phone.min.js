jQuery.cookie=function(t,e,n){if(1<arguments.length&&(null===e||"object"!=typeof e)){if(n=jQuery.extend({},n),null===e&&(n.expires=-1),"number"==typeof n.expires){var r=n.expires,o=n.expires=new Date;o.setDate(o.getDate()+r)}return document.cookie=[encodeURIComponent(t),"=",n.raw?String(e):encodeURIComponent(String(e)),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var i,a=(n=e||{}).raw?function(t){return t}:decodeURIComponent;return(i=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?a(i[1]):null};var itemApp={domain:"http://192.168.2.45:8080",phone:1,webRoot:""};function windowRoot(){$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"}),pageRoot()}function pageRoot(){$(function(){var t=$("div[class='page']").attr("data-initFun");null!=t&&window[t](),bindEvent()})}function getDirDeep(){var t=window.location.pathname;return getStrCount(t=(t=t.substring(t.indexOf("/app/"),t.length)).replace("/app",""),"/")}function bindEvent(){$("[data-url]").click(function(){var t=$(this).attr("data-url");window.location.href=t}),$("div[class='back']").click(function(){var t=$(this).attr("data-url"),e=$(this).attr("data-clickFun");null==t&&null==e?window.history.go(-1):null!=e&&window[e]()}),$("input").keypress(function(t){if(13===t.keyCode){$(this).blur();var e=$(this).attr("data-keyEnter");null!=e&&window[e]()}})}function loadJs(t){var e=t.loadJsType,n=t.jsRoot,r=t.jsFileName,o=window.location.pathname;if(0==e){r=o.substring(o.lastIndexOf("/")+1,o.lastIndexOf("."))+".js";for(var i="",a=getDirDeep(),l=0;l<a-1;l++)i+="../"}var c=i+n+r;console.log("jsFile="+c),document.write("<script src='"+c+"'><\/script>")}var pageConfig={loadJsType:0,jsRoot:"js/pages/data/",jsFileName:""};windowRoot();var app={setItem:function(t,e){"localStorage"in window&&null!==window.localStorage?window.localStorage.setItem(t,e):$.cookie(t,e,{expires:365,path:"/"})},getItem:function(t){var e=null;return"localStorage"in window&&null!==window.localStorage&&(e=localStorage.getItem(t)),null==e&&(e=$.cookie(t)),e},removeItem:function(t){"localStorage"in window&&null!==window.localStorage?window.localStorage.removeItem(t):$.cookie(t,null,{path:"/"})},post:function(t,e,n){var r=arguments.length,o=this.getItem("userId"),i=this.getItem("username"),a=this.getItem("tokenStr"),l=itemApp.domain+t,c=null,s=null;null==o&&(o=""),null==i&&(i=""),null==a&&(a=""),3==r&&((c=e).userId=o,c.username=i,c.tokenStr=a,s=n),2==r&&(c={userId:o,username:i,tokenStr:a},s=e),$.post(l,c,function(t){"function"==typeof s&&"error"!=t&&s(t)})},getParamValue:function(t){var e=document.URL,n=e.indexOf("?"),r="";if(-1!=n)for(var o=e.substring(n+1,e.lenght).split("&"),i=0;i<o.length;i++){var a=o[i].split("=");t==a[0]&&(r=a[1])}return r},alert:function(t,e){var n=$("<div class='alert-bg'></div>"),r=$("<div class='alert'>"+t+"</div>");if(0==$("body").find("div[class='alert']").length){n.append(r),$("body").append(n);var o=r.outerWidth(),i=n.outerWidth();console.log(o);var a=(i-o)/2;r.css("marginLeft",a),r.fadeIn("slow"),window.setTimeout(function(){r.fadeOut("slow",function(){n.remove(),"function"==typeof e&&e()})},2e3)}}};function toPage(t){window.location.href=t}function refreshPage(){window.location.reload()}function getStrCount(t,e){for(var n=0;0<=t.indexOf(e);)t=t.replace(e,""),n++;return n}function isMobile(t){return!!/^0?(13[0-9]|14[01456789]|15[0-9]|16[56]|17[01235678]|18[0-9]|19[89])[0-9]{8}$/.test(t)}function isPhone(t){return!!/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/.test(t)}function amountFormat(t){if(/^\d+$/.test(t))return t;var e=t.toFixed(2);return e=parseFloat(e)}function isNull(t){if(""==t)return!0;return new RegExp("^[ ]+$").test(t)}jQuery.fn.extend({clickToPage:function(t){return this.each(function(){$(this).click(function(){window.location.href=t})})}}),String.prototype.endWith=function(t){return!(null==t||""==t||0==this.length||t.length>this.length)&&this.substring(this.length-t.length)==t},String.prototype.startWith=function(t){return!(null==t||""==t||0==this.length||t.length>this.length)&&this.substr(0,t.length)==t},String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},Array.prototype.remove=function(t){if(isNaN(t)||t>this.length)return!1;for(var e=0,n=0;e<this.length;e++)e!=t&&(this[n++]=this[e]);this.length-=1},Array.prototype.isContain=function(t){if(isNaN(t))return!1;for(var e=!1,n=0;n<this.length;n++)this[n]==t&&(e=!0);return e},String.prototype.replaceAll=function(t,e){var n=new RegExp(t,"g");return this.replace(n,e)},function(u){u.extend(u.fn,{list:function(e){if(this._checkListConfig(e)){var n=this;if(e.isOpenCache){var t=window.localStorage.getItem("listCache");if(null==t)u(n)._list(e,1);else{var r=(t=JSON.parse(t)).ulObjHtml,o=t.page,i=t.pageCount,a=t.scrollTop;if(u(n).html(r),u.isFunction(e.onItemClick)&&u(n).children().each(function(){var t=u(this).attr("data-cache");obj=JSON.parse(t),u(this)._onItemClick(n,e,o,i,obj)}),o<i){var l=e.moreDiv;u(n)._scroll(e,o),u(n).after(l)}window.localStorage.removeItem("listCache"),u(n).parent().scrollTop(a)}}else u(n)._list(e,1)}},_checkListConfig:function(t){return t?!(!t.moreDiv||""==t.moreDiv)||(app.alert("更多列表元素不能为空"),!1):(app.alert("列表配置文件不能为空"),!1)},_list:function(r,o){var i=this,n=r.moreDiv,t=r.data,a=1,l=u.isFunction(r.onItemClick);if(t){a=t.pageCount;var e=t.list;u.each(e,function(t,e){var n=r.getItem(e);l&&n._onItemClick(i,r,o,a,e),u(i).append(n)}),1==o&&o<a&&u(i).after(n),o<a?u(i)._scroll(r,o):n.remove()}else{var c=r.url,s=r.params;s?s.page=o:s={page:o},u.post(c,s,function(t){a=t.pageCount;var e=t.list;u.each(e,function(t,e){var n=r.getItem(e);l&&n._onItemClick(i,r,o,a,e),u(i).append(n)}),console.log("page="+o+",pageCount="+a),1==o&&o<a&&u(i).after(n),o<a?u(i)._scroll(r,o):n.remove()})}},_scroll:function(n,r){var o=this,i=u(this).parent();u(i).on("scroll",function(){var t=i.outerHeight(),e=i.scrollTop();i.get(0).scrollHeight==t+e&&(u(i).unbind("scroll"),r+=1,console.log("加载第"+r+"页"),u(o)._list(n,r))})},_onItemClick:function(r,o,i,a,l){var t=u.isFunction(o.onItemClick),c=o.isOpenCache;u(this).attr("data-cache",JSON.stringify(l)),t&&(u(this).removeAttr("onclick"),this.click(function(){if(c){var t=u(r).html(),e=u(r).parent().scrollTop(),n={ulObjHtml:t,page:i,pageCount:a,scrollTop:e};n=JSON.stringify(n),window.localStorage.setItem("listCache",n)}o.onItemClick(l)}))}})}(jQuery),function(h){h.extend(h.fn,{entity:function(n){if(n){var r=this,o=n.leftSymbol?n.leftSymbol:"{{",i=n.rightSymbol?n.rightSymbol:"}}",t=h(r)._checkHtmlCode(o,i),e=t.checkResult,a=t.length;if(e&&0<a){var l=t.startArr,c=t.endArr,s=h(r).html(),u=n.data;if(u)h(r)._replaceHtml(s,u,l,c,o,i);else{var p=n.url,f=n.params;f=f||{},p&&""!=p&&h.post(p,f,function(t){var e=h.isFunction(n.getData);u=t,e&&(u=n.getData(t)),h(r)._replaceHtml(s,u,l,c,o,i)})}}}else app.alert("配置文件不能为空")},_checkHtmlCode:function(t,e){for(var n=h(this).html(),r=new Array,o=new Array,i=n.indexOf(t);-1!=i;)r.push(i),i=n.indexOf(t,i+t.length);for(var a=n.indexOf(e);-1!=a;)o.push(a),a=n.indexOf(e,a+e.length);var l=r.length,c={checkResult:!0,startArr:r,endArr:o,length:l};if(0==l)return c.checkResult=!1,c;if(r.length!=o.length)return c.checkResult=!1,app.alert("左符号和右符号的数量不匹配"),c;for(var s=0;s<l;s++){if(r[s]>o[s])return c.checkResult=!1,app.alert("右符号不能在左括号的前面"),c;if(s<l-1&&r[s+1]<o[s])return c.checkResult=!1,app.alert("符号不能嵌套使用"),c;var u=n.substring(r[s]+t.length,o[s]).trim();if(!/^[A-Za-z0-9]+$/.test(u))return c.checkResult=!1,app.alert("变量名"+u+"命名规范有误"),c}return c},_replaceHtml:function(t,e,n,r,o,i){for(var a=n.length,l=t,c=0;c<a;c++){var s=t.substring(n[c]+o.length,r[c]),u=s.trim();e&&e[u]&&(l=l.replace(o+s+i,e[u]))}h(this).html(l),h(this).find("img").each(function(){var t=h(this).attr("data-src");-1==t.indexOf(o)&&-1==t.indexOf(i)&&h(this).attr("src",t).removeAttr("data-src")})}})}(jQuery);